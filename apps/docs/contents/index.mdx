---
title: Overview
createdAt: 2025-07-20T22:35:03+08:00
lastModified: 2025-11-21T21:25:29+08:00
---

# Overview

<p align="center">
  <img
    src="https://github.com/Afilmory/assets/blob/main/afilmory-readme.webp?raw=true"
    alt="Afilmory"
    width="100%"
  />
</p>

Afilmory (/…ôÀàf…™lm…ôri/, "uh-FIL-muh-ree") is a term created for personal photography websites, blending Auto Focus (AF), aperture (light control), film (vintage medium), and memory (captured moments).

A modern photo gallery website built with React + TypeScript, supporting automatic photo synchronization from multiple storage sources (S3, GitHub), featuring high-performance WebGL rendering, masonry layout, EXIF information display, thumbnail generation, and more.

Live Photo Galleries:

- [afilmory.innei.in](https://afilmory.innei.in)
- [gallery.mxte.cc](https://gallery.mxte.cc)
- [photography.pseudoyu.com](https://photography.pseudoyu.com)
- [afilmory.magren.cc](https://afilmory.magren.cc)

## üåü Features

### Core Functionality

- üñºÔ∏è **High-Performance WebGL Image Renderer** - Custom WebGL component with smooth zoom and pan operations
- üì± **Responsive Masonry Layout** - Powered by Masonic, adapts to different screen sizes
- üé® **Modern UI Design** - Built with Tailwind CSS and Radix UI component library
- ‚ö° **Incremental Sync** - Smart change detection, processes only new or modified photos
- üåê **i18n** - Multi-language support
- üîó **OpenGraph** - OpenGraph metadata for social media sharing

### Image Processing

- üîÑ **HEIC/HEIF Format Support** - Automatic conversion of Apple device HEIC format
- üì∑ **TIFF Format Support** - Automatic conversion of TIFF format
- üñºÔ∏è **Smart Thumbnail Generation** - Multi-size thumbnails for optimized loading performance
- üìä **EXIF Information Display** - Complete shooting parameters including camera model, focal length, aperture, etc.
- üåà **Blurhash Placeholders** - Elegant image loading experience
- üì± **Live Photo Support** - Detection and display of iPhone Live Photos
- ‚òÄÔ∏è **HDR Image Support** - Display HDR images
- üåç **Reverse Geocoding** - Automatic location extraction from GPS coordinates with support for Mapbox and Nominatim providers

### Advanced Features

- üéõÔ∏è **Fujifilm Recipe** - Read and display Fujifilm camera film simulation settings
- üîç **Fullscreen Viewer** - Image viewer with gesture support
- üè∑Ô∏è **File System Tags** - Auto-generated tags based on file system
- ‚ö° **Concurrent Processing** - Multi-process/multi-thread concurrent processing support
- üóÇÔ∏è **Multi-Storage Support** - S3, GitHub, and other storage backends
- üì∑ **Share Image** - Share image to social media or embed iframe to your website
- üó∫Ô∏è **Interactive Map Explorer** - Geographic visualization of photos with GPS coordinates from EXIF data using MapLibre

## üèóÔ∏è Technical Architecture

### Frontend Tech Stack

- **React 19** - Latest React version with Compiler
- **TypeScript** - Complete type safety
- **Vite** - Modern build tool
- **Tailwind CSS** - Atomic CSS framework
- **Radix UI** - Accessible component library
- **Jotai** - State management
- **TanStack Query** - Data fetching and caching
- **React Router 7** - Routing management
- **i18next** - Internationalization

### Build System

- **Node.js** - Server-side runtime
- **Sharp** - High-performance image processing
- **AWS SDK** - S3 storage operations
- **Worker Threads/Cluster** - Concurrent processing
- **EXIF-Reader** - EXIF data extraction

### Storage Architecture

Designed with adapter pattern, supporting multiple storage backends:

- **S3-Compatible Storage** - AWS S3, MinIO, Alibaba Cloud OSS, etc.
- **GitHub Storage** - Using GitHub repository as image storage

## üöÄ Quick Start

### Docker Deployment

[Docker Deployment](https://github.com/Afilmory/docker)

## ‚öôÔ∏è Configuration Options

#### Remote Repository Configuration (`repo`)

To achieve incremental builds in CI, it is necessary to configure a cache repository, which will pull the cache before each build and upload the build results after the build.

```json
{
  "repo": {
    "enable": true,
    "url": "https://github.com/username/gallery-assets"
  }
}
```

This will automatically pull resources from the remote repository, avoiding rebuilds each time.

**In order to achieve uploading to the git repository, you need to provide a `GIT_TOKEN` and write it in the `.env` file.**

#### Storage Configuration (`storage`)

- `provider`: Storage provider (`s3` | `github`)
- `bucket`: S3 bucket name
- `region`: S3 region
- `endpoint`: S3 endpoint (optional)
- `prefix`: File prefix
- `customDomain`: Custom domain
- `excludeRegex`: Regular expression to exclude files (optional)

#### System Processing (`system.processing`)

- `defaultConcurrency`: Default concurrency
- `enableLivePhotoDetection`: Enable Live Photo detection
- `digestSuffixLength`: Digest suffix length for deterministic IDs
- `supportedFormats`: Optional allowlist of file extensions to process

#### Geocoding (via `geocodingPlugin`)

- `enable`: Enable reverse geocoding from GPS coordinates (default: `false`)
- `provider`: Geocoding service provider (`'mapbox'` | `'nominatim'` | `'auto'`, default: `'auto'`)
- `mapboxToken`: Mapbox access token (required when using Mapbox provider)
- `nominatimBaseUrl`: Custom Nominatim base URL (optional, defaults to OpenStreetMap's public instance)
- `cachePrecision`: Coordinate cache precision (decimals, default: `4`)

#### System Observability (`system.observability`)

- `showProgress`: Show build progress
- `showDetailedStats`: Show detailed statistics
- `logging.verbose`: Verbose logging
- `logging.level`: Log level (`info` | `warn` | `error` | `debug`)
- `logging.outputToFile`: Output to file
- `performance.worker.workerCount`: Number of worker processes
- `performance.worker.timeout`: Worker timeout (milliseconds)
- `performance.worker.useClusterMode`: Enable cluster mode

#### Geocoding Configuration Example

Enable reverse geocoding by adding the geocoding plugin in `builder.config.ts`:

**Using Nominatim (Free, but rate-limited):**

```typescript
import { defineBuilderConfig, geocodingPlugin } from '@afilmory/builder'

export default defineBuilderConfig(() => ({
  plugins: [
    geocodingPlugin({
      enable: true,
      provider: 'nominatim',
      // Optional: use custom Nominatim instance
      // nominatimBaseUrl: 'https://your-nominatim-instance.com'
    }),
  ],
}))

```

**Using Mapbox:**

```typescript
import { defineBuilderConfig, geocodingPlugin } from '@afilmory/builder'

export default defineBuilderConfig(() => ({
  plugins: [
    geocodingPlugin({
      enable: true,
      provider: 'mapbox',
      mapboxToken: process.env.MAPBOX_TOKEN,
    }),
  ],
}))
```

**Notes:**
- Mapbox may provide higher accuracy and better rate limits but requires an API token
- Nominatim is free but has strict rate limits (1 request/second)
- Both providers support intelligent caching to minimize API calls
- Location data includes country, city, and location name extracted from GPS coordinates
- Reverse geocoding is handled by the built-in geocoding plugin and runs only when the plugin is added to `plugins` with `enable: true`

## üìã CLI Commands

### Build Commands

```bash
# View help
pnpm run build:manifest -- --help

# Incremental update (default)
pnpm run build:manifest

# Force full update
pnpm run build:manifest -- --force

# Only regenerate thumbnails
pnpm run build:manifest -- --force-thumbnails

# Only regenerate manifest
pnpm run build:manifest -- --force-manifest
```

### Development Commands

```bash
# Start development server
pnpm dev

# Build production version
pnpm build
```

### Notes

- Ensure your S3 bucket already contains photo files
- If using remote repository, configure `builder.config.ts` first

## üîß Advanced Usage

### Custom Storage Provider

Implement the `StorageProvider` interface to support new storage backends:

```typescript
import { StorageProvider } from './src/core/storage/interfaces'

class MyStorageProvider implements StorageProvider {
  async getFile(key: string): Promise<Buffer | null> {
    // Implement file retrieval logic
  }

  async listImages(): Promise<StorageObject[]> {
    // Implement image list retrieval logic
  }

  // ... other methods
}
```

### Custom Image Processing

Add custom processors in the `src/core/image/` directory:

```typescript
export async function customImageProcessor(buffer: Buffer) {
  // Custom image processing logic
  return processedBuffer
}
```

## üìÑ License

MIT License ¬© 2025 Innei

## üîó Related Links

- [Live Demo](https://gallery.innei.in)
- [Personal Website](https://innei.in)
- [GitHub](https://github.com/innei)

If this project helps you, please give it a ‚≠êÔ∏è Star for support!
